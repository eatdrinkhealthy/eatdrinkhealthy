<template name="list">
  <div class="list">
    
    <div class="list__nav">
      {{#if owner}}
      <div class="list__edit">Edit</div>
      {{/if}}
      <div class="list__close" data-action="go-home">&#215;</div>
    </div>
    
    {{#autoForm collection=Lists id="updateListInfo" type="update" doc=list}}
      {{> afFieldInput name='title' class="list__title"}}
      <div class="list__owner">made by {{list.author}}</div>
      {{> afFieldInput name='description' class="list__description" placeholder="add description"}}
    {{/autoForm}}

    <div class="list__count">{{list.venues.length}}</div>
    
    <hr>
    {{#each list.venues}}
      {{#if place}}
        <div class="list-item">
          <div class="list-item__title">{{place.name}}</div>
          <div class="list-item__description">{{place.category}}</div>
          <div class="list-item__rating">{{{rating place.rating}}}</div>
          <div class="list-item__address">{{address place.location}}</div>
          <div class="list-item__arrow">&#187;</div>
        </div>
        <hr>
      {{else}}
        <div class="loading"> ... </div>
      {{/if}}
    {{else}}
      {{#if owner}}
        <div class="list__empty">Looks like you have no venues in this list yet! Why not <span data-action="go-home">add some?</span></div>
      {{else}}
        <div class="list__empty">Woops, this list is empty! Not too much to look at eh?</div>
      {{/if}}
    {{/each}}
    
    {{#if owner}}
      <button class="list__share">Share this list</button>
      <button class="list__delete list__delete--hide">Delete this list</button>
    {{/if}}
    
    {{#unless currentUser}}
      {{> loginButtons}}
    {{/unless}}
    
    <div class="ios-icon"></div>
  </div>  
  {{> shareModal}}
  {{> validation}}  
  
</template>
